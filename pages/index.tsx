import type { NextPage } from "next";
import Head from "next/head";
import { useState, useEffect } from "react";
import axios from "axios";
import useSwr from "swr";
import { leaguesResponseType } from "../types";
import { summonersFetcher } from "./apiHelpers";
import Rankings from "@components/Rankings";

const Home: NextPage = (props) => {
  console.log(props.region);
  const [challengerData, setChallengerData] = useState<leaguesResponseType>([]);
  //const { data, error } = useSwr("/api/getSummoners", summonersFetcher);
  useEffect(() => {
    axios
      .get("/api/getSummoners", {
        params: {
          region: "na1",
        },
      })
      .then((res) => res.data)
      .then((data) => data.entries)
      .then((arr: leaguesResponseType) =>
        setChallengerData(
          arr.sort((first, second) => second.leaguePoints - first.leaguePoints)
        )
      )
      .catch((err) => console.error(err));
  }, []);
  console.log(challengerData.length);
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Rankings _data={challengerData} />
    </>
  );
};

export default Home;

/**



*/
